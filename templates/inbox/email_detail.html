{% extends "base.html" %}
{% block title %}{{ email.subject }} â€” VoidMail{% endblock %}

{% block content %}
<section class="email-detail">
    <div class="email-actions">
        <a href="{% url 'inbox:inbox_view' token=mailbox.token %}" class="back-link">&larr; Back to inbox</a>
        <form method="post" action="{% url 'inbox:delete_email' pk=email.id %}" class="delete-form">
            {% csrf_token %}
            <button type="submit" class="btn-delete" onclick="return confirm('Delete this email?')">
                <svg width="14" height="14" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5">
                    <path d="M2 4h12M5 4V2a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v2m3 0v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V4h12"/>
                </svg>
                Delete
            </button>
        </form>
    </div>

    <div class="email-header">
        <h2>{{ email.subject }}</h2>
        <div class="email-meta">
            <span><strong>From:</strong> {{ email.sender }}</span>
            <span><strong>To:</strong> {{ email.recipient }}</span>
            <span><strong>Received:</strong> {{ email.received_at }}</span>
            <span><strong>Size:</strong> {{ email.size_bytes|filesizeformat }}</span>
        </div>
    </div>

    <div class="email-body">
        {% if email.body_html %}
            <iframe sandbox="" srcdoc="{{ email.body_html }}" class="html-frame"></iframe>
        {% else %}
            <pre class="text-body">{{ email.body_text }}</pre>
        {% endif %}
    </div>
</section>
{% endblock %}
